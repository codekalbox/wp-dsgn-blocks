(()=>{var e={642:e=>{e.exports={POSITIONING_COMPLETE_EVENT:"positionComplete",REPOSITIONING_DELAY:200}},271:(e,t,s)=>{const i=s(342);e.exports=class{listeners;#e;constructor(){this.listeners=[],this.#e=0}removeListener(e){const t=this.listeners.findIndex((t=>t.id===e));return-1!==t&&(this.listeners.splice(t,1),!0)}addListener(e,t){let s=this.#e++;return this.listeners.push(new i(s,e,t)),s}emit(e,t){for(const s of this.listeners)s.event===e&&s.handler(t)}}},988:(e,t,s)=>{const i=s(271),{checkParams:n,getMin:r}=s(573),{POSITIONING_COMPLETE_EVENT:o,REPOSITIONING_DELAY:a}=s(642);e.exports=class extends i{constructor(e){super(),n(e),e.container instanceof HTMLElement?(this.container=e.container,this.containerClass=e.container.className):(this.containerClass=e.container,this.container=document.querySelector(e.container)),this.static=e.static||!1,this.size=e.items,this.gutter=e.gutter,this.maxColumns=e.maxColumns||!1,this.useMin=e.useMin||!1,this.useTransform=e.useTransform,this.animate=e.animate||!1,this.center=e.center,this.styledItems=new Set,this.resizeObserver=null,this.isPositioning=!1}setContainer(e){const t=this.container;this.container=e,this.resizeObserver.unobserve(t),this.resizeObserver.observe(e)}initStyles(){if(!this.ready())return;this.container.style.position="relative";const e=this.items();for(let t=0;t<e.length;t++){if(this.styledItems.has(e[t]))continue;let s=e[t].style;s.position="absolute",this.animate&&(s.transition=(this.useTransform?"transform":"top, left")+" 0.2s ease"),this.styledItems.add(e[t])}}items(){return this.container.children}colWidth(){return this.items()[0].getBoundingClientRect().width+this.gutter}setup(){let e=this.container.getBoundingClientRect().width,t=this.colWidth(),s=Math.floor(e/t)||1,i=[];this.maxColumns&&s>this.maxColumns&&(s=this.maxColumns);for(let e=0;e<s;e++)i[e]={height:0,index:e};return{cols:i,wSpace:e-s*t+this.gutter}}nextCol(e,t){return this.useMin?r(e):e[t%e.length]}positionItems(){if(this.isPositioning)return;this.isPositioning=!0;let{cols:e,wSpace:t}=this.setup(),s=0,i=this.colWidth(),n=this.items();t=this.center?Math.floor(t/2):0,this.initStyles();for(let r=0;r<n.length;r++){let o=this.nextCol(e,r),a=n[r],l=o.height?this.gutter:0,h=o.index*i+t+"px",c=o.height+l+"px";this.useTransform?a.style.transform=`translate(${h}, ${c})`:(a.style.top=c,a.style.left=h),o.height+=a.getBoundingClientRect().height+l,o.height>s&&(s=o.height)}this.container.style.height=s+this.gutter+"px",this.isPositioning=!1,this.emit(o)}ready(){return!!this.static||this.items().length>=this.size}getReady(){let e=setInterval((()=>{this.container=document.querySelector(this.containerClass),this.ready()&&(clearInterval(e),this.listen())}),100)}observeContainerResize(){this.resizeObserver||(this.resizeObserver=new ResizeObserver((()=>{setTimeout((()=>{this.positionItems()}),a)})),this.resizeObserver.observe(this.container))}listen(){this.ready()?(window.addEventListener("resize",(()=>{setTimeout((()=>{this.positionItems()}),a)})),this.observeContainerResize(),this.positionItems()):this.getReady()}onPositionComplete(e){return this.addListener(o,e)}}},342:e=>{e.exports=class{id;event;handler;constructor(e,t,s){this.id=e,this.event=t,this.handler=s}}},573:e=>{const t=e=>{throw new Error(`Missing property '${e}' in MagicGrid config`)};e.exports={checkParams:e=>{const s=["useTransform","center"];if(!e)throw new Error("No config object has been provided.");for(let t of s)"boolean"!=typeof e[t]&&(e[t]=!0);"number"!=typeof e.gutter&&(e.gutter=25),e.container||t("container"),e.items||e.static||t("items or static")},getMin:e=>{let t=e[0];for(let s of e)s.height<t.height&&(t=s);return t}}}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=s(988),t=s.n(e);class i{masonryInstance=null;constructor(e){this.element=e,this.init()}init(){this.events(),this.masonryLayout(),this.externalLinks()}events(){this.maybeMediumZoom()}externalLinks(){this.element.querySelectorAll(".nectar-blocks-image-grid__link").forEach((e=>{const t=e.getAttribute("href");t&&t.startsWith("http")&&!t.includes(window.location.hostname)&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))}))}masonryLayout(){if(!this.element.classList.contains("nectar-blocks-image-grid__grid--masonry"))return;const e=getComputedStyle(this.element).getPropertyValue("--grid-spacing");this.masonryInstance=new(t())({container:this.element,static:!0,gutter:this.convertGapToPixels(e),animate:!1,center:!1}),this.masonryInstance.listen(),this.masonryInstance.onPositionComplete((()=>{if(!this.masonryInstance)return;this.element.classList.add("nectar-blocks-image-grid__grid--masonry--ready");const e=getComputedStyle(this.element).getPropertyValue("--grid-spacing");this.masonryInstance.gutter=this.convertGapToPixels(e)}))}convertGapToPixels(e){const t=document.createElement("div");t.style.position="absolute",t.style.width=e,this.element.appendChild(t);const s=parseFloat(getComputedStyle(t).width);return this.element.removeChild(t),s}maybeMediumZoom(){this.element.querySelectorAll(".nectar-blocks-image-grid__link[data-lg-size]").forEach((e=>{e.addEventListener("click",(()=>{e.classList.add("nectar__link--lightbox--open")}))})),this.element.addEventListener("lgAfterClose",(()=>{this.removeLightboxOpenClasses()})),["lgAfterSlide","lgSlideItemLoad"].forEach((e=>{this.element.addEventListener(e,(()=>{this.removeLightboxOpenClasses();const e=document.querySelector(".lg-item.lg-current img")?.getAttribute("src");e&&this.modifyLightboxOpenClass(e)}))}))}removeLightboxOpenClasses(){this.element.querySelectorAll(".nectar__link--lightbox--open").forEach((e=>{e.classList.remove("nectar__link--lightbox--open")}))}modifyLightboxOpenClass(e){this.element.querySelectorAll(".nectar-blocks-image-grid__link[data-lg-size]").forEach((t=>{const s=t.querySelector("img");t.getAttribute("href")!==e&&s?.getAttribute("src")!==e||t.classList.add("nectar__link--lightbox--open")}))}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".nectar-blocks-image-grid__grid").forEach((e=>{new i(e)}))}))})()})();