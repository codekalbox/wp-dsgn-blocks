(()=>{"use strict";const t=(t,e=1)=>{const s=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],n=(t,e)=>{let s=new RegExp(`${(e[2]?e[2]:"")+e[0]}|${(e[3]?e[3]:"")+e[1]}`,"g");return t.replace(s,(t=>t===e[0]?e[1]:e[0]))};if(e)for(let e=0;e<s.length;++e)t=n(t,s[e]);else for(let e=s.length;e--;)t=n(t,s[e]);return t};class e{timeout=null;constructor(t){this.element=t,this.sections=this.element.querySelectorAll(".nectar-blocks-accordion__inner > .nectar-blocks-accordion-section"),this.sections.length?(this.events(),this.init()):console.warn("NectarAccordion: missing items")}events(){this.sections.forEach((t=>{t.addEventListener("click",this.clickHandler.bind(this))})),this.deepLink()}init(){var t;const e=null!==(t=this.element.dataset.startingAccordion)&&void 0!==t?t:"0",s=parseInt(e);s>=0&&s<this.sections.length&&(this.showContent(parseInt(e)),this.sections[parseInt(e)].classList.add("is-active")),this.sections.forEach((t=>{t.tabIndex=0,t.setAttribute("role","button")}))}clickHandler(t){if(this.element.classList.add("interacted-with"),t.target){const e=t.target;if(e.classList.contains("nectar-blocks-accordion-section__content")||e.closest(".nectar-blocks-accordion-section__content"))return}const e=t.currentTarget;if(e.classList.contains("is-active")){clearTimeout(this.timeout),e.classList.toggle("is-active");const t=e.querySelector(".nectar-blocks-accordion-section__content"),s=t.scrollHeight;return t.style.maxHeight=`${s}px`,void setTimeout((()=>{t.style.maxHeight="0px"}),0)}const s=[...this.sections].indexOf(e);this.activate(s),this.showContent(s),t.preventDefault()}activate(e){this.sections[e]?(setTimeout((()=>{this.sections.forEach((t=>{t.classList.remove("is-active")})),this.sections[e].classList.add("is-active")}),10),ScrollTrigger.getAll().forEach((s=>{var n;const i=s.trigger;if(!i)return;if(s?.vars?.end)return;if(!this.sections[e].contains(i))return;const o=i.dataset?.autoplayTrigger;if(o&&"in-viewport"===o){const t=i.querySelector(".nectar-blocks-video-player__video video");t&&(t.currentTime=0,t.play())}if(!s.animation)return;const c=null!==(n=window?.nectarBlocksFrontend?.device)&&void 0!==n?n:"",r=i.closest("div[data-nectar-block-animation]");if(r&&r.dataset.nectarBlockAnimation){const e=JSON.parse((e=>{try{return JSON.parse(e),e}catch(t){}return/[!~$].*[!~$].*[!~$]/.test(e)?(e=>{const s=(e=e.substring(0,e.length-1)).split("");let n=s[0];if(s.length>1){let t=s[1];for(let e of t){let t=n.split(e);n=t.join(t.pop())}}return t(n,0)})(e):e})(r.dataset.nectarBlockAnimation));e?.scrollIntoView?.triggerDevices?.includes(c)&&(i.classList.add("no-transition"),s.animation?.restart())}}))):console.warn("NectarAccordion: cannot find element")}showContent(t){clearTimeout(this.timeout),this.sections.forEach(((e,s)=>{if(s!==t){const t=e.querySelector(".nectar-blocks-accordion-section__content");if(!t)return;const s=t.scrollHeight;t.style.maxHeight=`${s}px`,setTimeout((()=>{t.style.maxHeight="0px"}),0)}}));const e=this.sections[t].querySelector(".nectar-blocks-accordion-section__content");if(!e)return;const s=e.scrollHeight;e.style.maxHeight=`${s}px`,this.timeout=setTimeout((()=>{e.style.maxHeight="none"}),700)}deepLink(){const t=window.location.hash;if(t){const e=this.element.querySelector(t);e&&this.sections.forEach(((t,s)=>{t.contains(e)&&this.activate(s)}))}}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".nectar-blocks-accordion").forEach((t=>{new e(t)}))}))})();