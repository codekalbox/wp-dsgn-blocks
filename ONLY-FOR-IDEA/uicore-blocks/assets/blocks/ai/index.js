(()=>{"use strict";var e,t={790:e=>{e.exports=window.ReactJSXRuntime},1455:e=>{e.exports=window.wp.apiFetch},1609:e=>{e.exports=window.React},3582:e=>{e.exports=window.wp.coreData},4715:e=>{e.exports=window.wp.blockEditor},4997:e=>{e.exports=window.wp.blocks},5155:(e,t,o)=>{var r=o(9494),i=o(4715),a=o(6087),s=o(7723),n=o(790);const l=({onConfigComplete:e})=>{const t=(0,a.useRef)(null),[o,r]=(0,a.useState)("");return(0,a.useEffect)(()=>{t.current&&t.current.focus()},[]),(0,n.jsxs)("div",{className:"uicore-blocks-ai",children:[(0,n.jsx)("h4",{children:(0,s.__)("Elementor Import","uicore-blocks")}),(0,n.jsx)("p",{children:(0,s.__)("Use CTRL + V to paste the template","uicore-blocks")}),(0,n.jsx)("input",{type:"text",ref:t,value:o,onPaste:t=>{const o=t.clipboardData.getData("text");if(t.stopPropagation(),!o||""===o)return void alert((0,s.__)("No data to paste","uicore-blocks"));let r;try{r=JSON.parse(o),console.log("Pasted template:",r)}catch(t){return void alert((0,s.__)("Invalid Elementor Template","uicore-blocks"))}e(r)},onChange:e=>r(e.target.value)})]})};var c=o(6427),d=o(1735);const _=({onFinish:e,duration:t,estimateSavedTime:o,credits:r})=>(0,n.jsxs)("div",{className:"uicore-blocks-ai-feedback",onClick:()=>e(),children:[(0,n.jsx)("div",{className:"uicore--title",children:(0,s.__)("How was the output?","uicore-blocks")}),(0,n.jsxs)("div",{className:"uicore-blocks-ai-content-buttons",children:[(0,n.jsx)(c.Button,{variant:"primary",onClick:()=>e(),iconSize:17,icon:(0,n.jsx)(d.$qj,{}),children:(0,s.__)("Keep It","uicore-blocks")}),(0,n.jsx)(c.Button,{variant:"secondary",iconSize:17,onClick:()=>e("retry"),icon:(0,n.jsx)(d.d1R,{}),children:(0,s.__)("Try Again","uicore-blocks")})]}),r&&(0,n.jsxs)("p",{className:"uicore-ai-credits",children:[(0,s.__)("You have ","uicore-blocks"),r," ",(0,s.__)(" credits","uicore-blocks")]}),(0,n.jsxs)("p",{className:"uicore--info",children:[(0,s.__)("Generation took ","uicore-blocks"),t,"s"]}),(0,n.jsxs)("p",{className:"uicore--info",children:[(0,s.__)("On average, this section is built in roughly ","uicore-blocks"),o]})]}),u=({onConfigComplete:e})=>{const[t,o]=(0,a.useState)("");return(0,n.jsxs)("div",{className:"uicore-blocks-ai",children:[(0,n.jsx)("h4",{children:(0,s.__)("Generate from Scratch","uicore-blocks")}),(0,n.jsx)("p",{children:(0,s.__)("Describe what you want to generate.","uicore-blocks")}),(0,n.jsx)("textarea",{value:t,onChange:e=>o(e.target.value)}),(0,n.jsx)(c.Button,{onClick:async()=>{e(t)},disabled:!t.trim(),variant:"primary",children:(0,s.__)("Generate","uicore-blocks")})]})},b=({blockMessage:e,error:t})=>{const o=[(0,s.__)("Importing blocks","uicore-blocks"),(0,s.__)("Processing data","uicore-blocks"),(0,s.__)("Generating content","uicore-blocks"),(0,s.__)("Reviewing blocks","uicore-blocks"),(0,s.__)("Adjusting styles","uicore-blocks"),(0,s.__)("Polishing Block","uicore-blocks"),(0,s.__)("Checking Output","uicore-blocks"),(0,s.__)("Please wait","uicore-blocks")];return(0,n.jsxs)("div",{className:"uicore-blocks-ai",children:[!e&&!t&&(0,n.jsx)(p,{words:[]}),e&&(0,n.jsx)(p,{words:[e,o[Math.floor(Math.random()*o.length)],e,o[Math.floor(Math.random()*o.length)],e]}),t&&(0,n.jsx)("p",{className:"uicore--error",children:t})]})},p=({words:e})=>(0,n.jsxs)("div",{className:"uicore-bl-ai-loader",children:[(0,n.jsx)("div",{className:"uicore-bl-ai-spinner",children:(0,n.jsx)("div",{className:"uicore-bl-ai-spinner-inner"})}),(0,n.jsx)("div",{className:"uicore-bl-ai-words",children:(0,n.jsx)("div",{className:"uicore-bl-ai-words-container",children:e.map((e,t)=>(0,n.jsx)("div",{className:"uicore-bl-ai-word",children:e},t))})})]}),g=({onSelect:e})=>(0,n.jsxs)("div",{className:"uicore-blocks-ai",children:[(0,n.jsx)("h4",{children:(0,s.__)("AI Configuration","uicore-blocks")}),(0,n.jsx)("p",{children:(0,s.__)("Choose how you want to generate blocks","uicore-blocks")}),(0,n.jsxs)("div",{className:"uicore-blocks-ai-content-buttons",children:[(0,n.jsx)(c.Button,{onClick:()=>e("elementor-to-gutenberg"),variant:"secondary",children:(0,s.__)("Import Elementor","uicore-blocks")}),(0,n.jsx)(c.Button,{disabled:!0,onClick:()=>e("import_screenshot"),variant:"secondary",children:(0,s.__)("Import Screenshot","uicore-blocks")}),(0,n.jsx)(c.Button,{disabled:!0,onClick:()=>e("generate-gutenberg"),variant:"secondary",children:(0,s.__)("Generate from scratch","uicore-blocks")})]})]});var h=o(7143),m=o(1557),k=o(4997);const f=e=>{const t=e.block||e.blockType,o=t.startsWith("uicore/")?t:"uicore/"+t,r=(e.innerBlocks||[]).map(e=>f(e)),i=(0,m.ss)(),{attributes:a={}}=e;a?.imageSrc&&(a.imageId=(0,m.ss)(3));const s=(e,t)=>{const o=wp.blocks.getBlockType(t)?.defaultAttributes,r={...e};return Object.keys(r).forEach(e=>{o?.[e]||delete r[e],"syncAttr"===e&&"object"==typeof r[e]&&Object.keys(r[e]).forEach(t=>{r[e][t]=s(r[e][t],t)}),"object"==typeof r[e]&&"object"==typeof o[e]?.default&&void 0!==o[e]?.default?.desktop&&Object.keys(o[e].default).forEach(t=>{r[e]?.[t]&&typeof r[e][t]==typeof o[e].default[t]||(r[e][t]=o[e].default[t])})}),r},n=s(a,o);return(0,k.createBlock)(o,{blockId:i,...a,...n},r)},w=(e,t,o=!1)=>{const r=e?.structure||e;console.log("Full data:",r);const i=f(r);if(t){if(o){const{replaceBlock:e}=wp.data.dispatch("core/block-editor");return void e(t,i)}const{insertBlocks:e}=wp.data.dispatch("core/block-editor");return void setTimeout(()=>{const o=wp.data.select("core/block-editor").getBlocks(t);o.length>0&&o.forEach(e=>{wp.data.dispatch("core/block-editor").removeBlock(e.clientId)}),e([i],0,t,!1)},100)}const{insertBlocks:a}=wp.data.dispatch("core/block-editor");a([i])},y=(e,t)=>{const o=`${t}_background`;"classic"!==e[o]&&""!==e[o]||[`${t}_color_stop`,`${t}_color_stop_tablet`,`${t}_color_stop_mobile`,`${t}_color_b`,`${t}_color_b_stop`,`${t}_color_b_stop_tablet`,`${t}_color_b_stop_mobile`,`${t}_gradient_type`,`${t}_gradient_angle`,`${t}_gradient_angle_tablet`,`${t}_gradient_angle_mobile`,`${t}_gradient_position`,`${t}_gradient_position_tablet`,`${t}_gradient_position_mobile`,`${t}_bg_width`].forEach(t=>delete e[t])},v=async({mode:e="elementor-to-gutenberg",retry:t=!1,onStreamData:o,...r})=>{const{createNotice:i,removeNotices:a}=(0,h.dispatch)("core/notices"),s={...r};"elementor-to-gutenberg"===e&&r.template&&(s.template=(e=>{const t=JSON.parse(JSON.stringify(e)),o=e=>{if(e&&"object"==typeof e)for(const t in e)if(void 0!==e[t]&&null!==e[t])if("editSettings"!==t&&"defaultEditSettings"!==t&&"htmlCache"!==t&&"isInner"!==t&&"isLocked"!==t&&"section_equal_height_selector"!==t&&"section_sticky_position"!==t&&"section_parallax_value"!==t)if(t.endsWith("box_shadow_type")||t.endsWith("text_shadow_type")&&""===e[t])delete e[t],delete e[t.replace("_type","")],delete e[t.replace("_type","_hover")];else if("flex"===e[t]&&(delete e.grid_outline,delete e.grid_columns_grid,delete e.grid_columns_grid_mobile,delete e.grid_rows_grid,delete e.grid_auto_flow,delete e.grid_auto_flow_tablet,delete e.grid_auto_flow_mobile,delete e.grid__is_row,delete e.grid__is_column),"_border_border"!==t||""!==e[t])if("badge"!==t||""!==e[t])if("readmore"!==t||""!==e[t])if("_mask_switch"===t&&""===e[t]&&(delete e[t],delete e._mask_shape,delete e._mask_image,delete e._mask_notice,delete e._mask_size,delete e._mask_size_tablet,delete e._mask_size_mobile,delete e._mask_size_scale,delete e._mask_size_scale_tablet,delete e._mask_size_scale_mobile,delete e._mask_position,delete e._mask_position_tablet,delete e._mask_position_mobile,delete e._mask_position_x,delete e._mask_position_x_tablet,delete e._mask_position_x_mobile,delete e._mask_position_y,delete e._mask_position_y_tablet,delete e._mask_position_y_mobile,delete e._mask_repeat,delete e._mask_repeat_tablet,delete e._mask_repeat_mobile),"_position"!=t&&"position"!=t||""!=e[t])if(y(e,"_background"),y(e,"_background_hover"),y(e,"background"),y(e,"background_hover"),y(e,"background_overlay"),y(e,"background_overlay_hover"),y(e,"background_color"),y(e,"tabs_title_background_color"),y(e,"tabs_title_background_color_hover"),y(e,"box_background_color"),t.includes("slideshow")||t.includes("transition")||t.includes("stroke")||t.includes("transform_keep"))delete e[t];else if(t.startsWith("ep_")||t.startsWith("element_pack_")||t.startsWith("css_filters")||t.startsWith("background_overlay_slideshow_")||t.startsWith("background_overlay_hover_slideshow_")||t.startsWith("uicore_animated_border")||t.startsWith("uicore_scroll")||t.startsWith("_flex_grow")||t.startsWith("_flex_shrink")||t.startsWith("ui_animate_split")||t.startsWith("drop_cap_"))delete e[t];else if("rating_number"!==e[t]){if(e[t]?.unit&&1===Object.keys(e[t]).length&&delete e[t],"object"==typeof e[t]){if(null===e[t]||0===Object.keys(e[t]).length){delete e[t];continue}2===Object.keys(e[t]).length&&(e[t].hasOwnProperty("unit")&&e[t].hasOwnProperty("isLinked")||e[t].hasOwnProperty("unit")&&e[t].hasOwnProperty("size")&&0===e[t].size)&&delete e[t]}""===e[t]||null===e[t]||" "===e[t]?delete e[t]:"object"==typeof e[t]&&null!==e[t]&&o(e[t])}else delete e[t].unit;else delete e._offset_orientation_h,delete e._offset_orientation_v,delete e.offset_orientation_h,delete e.offset_orientation_v;else delete e[t],delete e.readmore_text,delete e.readmore_icon,delete e.readmore_background_color_b,delete e.readmore_background_color_b_stop,delete e.readmore_background_gradient_type,delete e.readmore_background_gradient_angle,delete e.readmore_background_gradient_position,delete e.readmore_background_bg_width,delete e.readmore_box_hover_background_color_b,delete e.readmore_box_hover_background_color_b_stop,delete e.readmore_box_hover_background_gradient_type,delete e.readmore_box_hover_background_gradient_angle,delete e.readmore_box_hover_background_gradient_position,delete e.readmore_box_hover_background_bg_width,delete e.readmore_hover_background_color_b,delete e.readmore_hover_background_color_b_stop,delete e.readmore_hover_background_gradient_type,delete e.readmore_hover_background_gradient_angle,delete e.readmore_hover_background_gradient_position,delete e.readmore_hover_background_bg_width,delete e.text_align_readmore,delete e.readmore_link,delete e.readmore_icon_align,delete e.readmore_icon_indent;else delete e[t],delete e.badge_position,delete e.badge_horizontal_offset,delete e.badge_typography_font_size,delete e.badge_typography_line_height,delete e.badge_background_color_b,delete e.badge_background_color_b_stop,delete e.badge_background_gradient_type,delete e.badge_background_gradient_angle,delete e.badge_background_gradient_position,delete e.badge_background_bg_width,delete e.badge_radius,delete e.badge_padding,delete e.badge_hover_background_color_b,delete e.badge_hover_background_color_b_stop,delete e.badge_hover_background_gradient_type,delete e.badge_hover_background_gradient_angle,delete e.badge_hover_background_gradient_position,delete e.badge_hover_background_bg_width;else delete e[t],delete e._border_width,delete e._border_width_tablet,delete e._border_width_mobile,delete e._border_color;else delete e[t];else delete e[t]};return o(t),o(t),t})(r.template));const n=window?.ui_dc_global?.license?.key;if("uicore-pro"===window?.ui_dc_global?.license?.product&&window?.ui_dc_global?.license?.key||-1!=window.location.href.indexOf("uicore.pro/gutenberg")){a("uicore-ai-notice"),i("info","Import process started...",{isDismissible:!1,type:"snackbar",id:"uicore-ai-notice"});try{const r=await fetch("https://ai-designer-api.uicore.co/"+e,{method:"POST",headers:{"Content-Type":"application/json","x-wp-key":n,...t?{"x-wp-retry":"true"}:{}},body:JSON.stringify(s)});if(!r.body)throw console.log(r),new Error("Response has no body.");if(403===r.status){const e=await r.json();return i("error",e.error||"Forbidden access",{isDismissible:!0,type:"snackbar",id:"uicore-ai-notice"}),void o({type:"error",data:e.error})}const a=new TextDecoder("utf-8"),l=r.body.getReader(),c="\n\n==newline==\n\n";let d="";for(let e=!1;!e;){const{value:t,done:r}=await l.read();let i;for(e=r,t&&(d+=a.decode(t,{stream:!0}));-1!==(i=d.indexOf(c));){const e=d.slice(0,i).trim();if(d=d.slice(i+c.length),e)try{const t=JSON.parse(e);o?.(t)}catch(t){console.error("JSON parse error:",t,e)}}e&&(d+=a.decode())}if(d.trim())try{const e=JSON.parse(d);o?.(e)}catch(e){console.error("Trailing JSON parse error:",e,d)}}catch(e){i("error","Failed to fetch stream: "+e.message,{isDismissible:!0,type:"snackbar",id:"uicore-ai-notice"}),o&&o({type:"error",data:e.message})}}else i("error","You need to connect your license to use this feature.",{isDismissible:!0,type:"snackbar",id:"uicore-ai-notice"})};var x=o(1455),j=o.n(x);const{createNotice:S}=(0,h.dispatch)("core/notices");async function O(e,t){const o=await j()({path:"/uicore-blocks/v1/import-images",method:"POST",data:{template:e}});if(!o?.success)throw new Error("Failed to import images");o?.data?.fails>0&&S("info",(0,s.__)(`Failed to import ${o.data.fails} images`,"uicore-blocks"),{isDismissible:!0,type:"snackbar",id:"import-images-notice"}),console.log("Imported images:",o.data.template);const r=JSON.parse(o.data.template);w(r,t)}(0,r.N)({name:"uicore/ai",Edit:({clientId:e})=>{const{mode:t,setMode:o,isLoading:r,blockMessage:c,error:d,duration:p,estimateSavedTime:m,credits:k,onStart:f,onFinish:y}=(e=>{const[t,o]=(0,a.useState)(null),[r,i]=(0,a.useState)(!1),[n,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[_,u]=(0,a.useState)(null),[b,p]=(0,a.useState)(null),[g,m]=(0,a.useState)(null),[k,f]=(0,a.useState)(null),[y,x]=(0,a.useState)({type:null,data:null}),{removeNotices:j,createNotice:S}=(0,h.dispatch)("core/notices"),{getBlockParents:N,getBlocks:C,getBlockOrder:T}=(0,h.select)("core/block-editor"),{moveBlocksToPosition:M,replaceBlock:B}=(0,h.dispatch)("core/block-editor");(0,a.useEffect)(()=>{if(r)u(Date.now());else{const e=Date.now();_&&null===g&&m((e=>{const t=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;let o,r,i,a=0;e<=30?(o=.5,r=0,i=8):e<=60&&e>30?(o=.4,r=6,i=20,a=4):e<=120&&e>60?(o=.18,r=10,i=25,a=10):(o=.08,r=20,i=30,a=15);const s=Math.round(e*o),n=Math.max(s+t(r,i-3)-r/1.5,1),l=Math.min(Math.max(s+t(r+5,i),2),30);return` ${n} - ${Math.max(n+6+a,Math.min(n+20,l))} min`})((e-_)/1e3)),p(e)}},[r]);const I=t=>{switch(t.type){case"credits":f(t.balance);break;case"message":l(t.data),i(!0);break;case"full":l(null),i(!1),o("done"),w(t.data,e),O(t.data,e),j("uicore-ai-notice");break;case"block":l((0,s.__)("Processing ","uicore-blocks")+t.data.replace("uicore/","").replace("-"," ")),i(!0);break;case"error":d(t.messages||(0,s.__)("Unknown error","uicore-blocks")),setTimeout(()=>i(!1),1e3),setTimeout(()=>{d(null),l(null),u(null),p(null),m(null)},1005)}},$=((b-_)/1e3).toFixed(0);return{mode:t,setMode:o,isLoading:r,blockMessage:n,error:c,estimateSavedTime:g,credits:k,duration:$,onStart:({data:e,type:t})=>{if(("uicore-pro"!==window?.ui_dc_global?.license?.product||!window?.ui_dc_global?.license?.key)&&-1==window.location.href.indexOf("uicore.pro/gutenberg"))return alert((0,s.__)("You need to connect your product to use the AI features.","uicore-blocks")),void i(!1);i(!0),x({type:t,data:e}),v({...e,mode:t,onStreamData:I})},onFinish:t=>{if("retry"===t){if(y){i(!0),v({...y.data,mode:y.type,retry:!0,onStreamData:I});const t=C(e).map(e=>e.clientId),o=N(e)[0]||null,r=T(o?.clientId).indexOf(e)||0;-1!==r&&M(t,e,o?.clientId,r)}else o(null);return l(null),void d(null)}"dislike"===t&&console.log("User disliked the output, handling accordingly...");const r=C(e);r.length>0&&B(e,r[0])}}})(e);return t?r?(0,n.jsx)(b,{blockMessage:c,error:d}):"elementor-to-gutenberg"===t?(0,n.jsx)(l,{onConfigComplete:e=>{f({data:{template:e},type:"elementor-to-gutenberg"})}}):"generate-gutenberg"===t?(0,n.jsx)(u,{onConfigComplete:e=>{f({data:{description:e},type:"generate-gutenberg"})}}):(0,n.jsxs)("div",{className:"uicore-blocks-ai-content",children:[(0,n.jsx)(i.InnerBlocks,{}),(0,n.jsx)(_,{onFinish:y,duration:p,estimateSavedTime:m,credits:k})]}):(0,n.jsx)(g,{onSelect:o})},Save:()=>null,attributes:{blockId:{type:"string"}}})},5573:e=>{e.exports=window.wp.primitives},5795:e=>{e.exports=window.ReactDOM},6087:e=>{e.exports=window.wp.element},6427:e=>{e.exports=window.wp.components},7143:e=>{e.exports=window.wp.data},7723:e=>{e.exports=window.wp.i18n},8468:e=>{e.exports=window.lodash},8537:e=>{e.exports=window.wp.htmlEntities},9491:e=>{e.exports=window.wp.compose}},o={};function r(e){var i=o[e];if(void 0!==i)return i.exports;var a=o[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=t,e=[],r.O=(t,o,i,a)=>{if(!o){var s=1/0;for(d=0;d<e.length;d++){for(var[o,i,a]=e[d],n=!0,l=0;l<o.length;l++)(!1&a||s>=a)&&Object.keys(r.O).every(e=>r.O[e](o[l]))?o.splice(l--,1):(n=!1,a<s&&(s=a));if(n){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,i,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.j=6164,(()=>{var e={3622:0,6164:0,6974:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var i,a,[s,n,l]=o,c=0;if(s.some(t=>0!==e[t])){for(i in n)r.o(n,i)&&(r.m[i]=n[i]);if(l)var d=l(r)}for(t&&t(o);c<s.length;c++)a=s[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},o=globalThis.webpackChunkuicore_blocks=globalThis.webpackChunkuicore_blocks||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=r.O(void 0,[2123,8096,2076],()=>r(5155));i=r.O(i)})();